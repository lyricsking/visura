{
  "version": 3,
  "sources": ["../../src/server/edit.server.ts"],
  "sourcesContent": ["import { ActionFunctionArgs, json } from \"@remix-run/node\";\r\nimport { getAuthUser } from \"~/core/auth/server/auth.server\";\r\nimport formDataToObject from \"~/shared/utils/form-data-to-object\";\r\nimport { createPost } from \"./post.server\";\r\nimport { Types } from \"mongoose\";\r\nimport { parseError } from \"~/shared/utils/mongoose\";\r\nimport { PluginLoaderFunction } from \"~/core/page/types/page\";\r\n\r\nexport const action = async ({ request }: ActionFunctionArgs) => {\r\n  let authUser = await getAuthUser(request);\r\n  if (!authUser || !authUser.id) {\r\n    // throw new Error(\"You are not authorised to perform this operation\");\r\n  }\r\n\r\n  const formData = await request.formData();\r\n  const formObject: any = formDataToObject(formData);\r\n  console.log(Object.fromEntries(formData));\r\n\r\n  // let title = formObject[\"title\"];\r\n  // let excerpt = formObject[\"excerpt\"];\r\n  // let content = formObject[\"content\"];\r\n  // let tags = formObject[\"tags\"];\r\n  // let featuredImage = formObject[\"featuredImage\"];\r\n\r\n  let response = await createPost({\r\n    ...formObject,\r\n    author: new Types.ObjectId(),\r\n    published: false,\r\n  });\r\n\r\n  if (response.error) {\r\n    const values = Object.fromEntries(formData);\r\n    let errors = parseError(response.error);\r\n\r\n    return json({ errors, values });\r\n  }\r\n\r\n  return json({ post: response.data });\r\n};\r\n\r\nexport const loader: PluginLoaderFunction = () => {\r\n  return async () => {};\r\n};\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAyC;AACzC,kBAA4B;AAC5B,iCAA6B;AAC7B,kBAA2B;AAC3B,sBAAsB;AACtB,IAAAA,mBAA2B;AAGpB,MAAM,SAAS,OAAO,EAAE,QAAQ,MAA0B;AAC/D,MAAI,WAAW,UAAM,yBAAY,OAAO;AACxC,MAAI,CAAC,YAAY,CAAC,SAAS,IAAI;AAAA,EAE/B;AAEA,QAAM,WAAW,MAAM,QAAQ,SAAS;AACxC,QAAM,iBAAkB,2BAAAC,SAAiB,QAAQ;AACjD,UAAQ,IAAI,OAAO,YAAY,QAAQ,CAAC;AAQxC,MAAI,WAAW,UAAM,wBAAW;AAAA,IAC9B,GAAG;AAAA,IACH,QAAQ,IAAI,sBAAM,SAAS;AAAA,IAC3B,WAAW;AAAA,EACb,CAAC;AAED,MAAI,SAAS,OAAO;AAClB,UAAM,SAAS,OAAO,YAAY,QAAQ;AAC1C,QAAI,aAAS,6BAAW,SAAS,KAAK;AAEtC,eAAO,kBAAK,EAAE,QAAQ,OAAO,CAAC;AAAA,EAChC;AAEA,aAAO,kBAAK,EAAE,MAAM,SAAS,KAAK,CAAC;AACrC;AAEO,MAAM,SAA+B,MAAM;AAChD,SAAO,YAAY;AAAA,EAAC;AACtB;",
  "names": ["import_mongoose", "formDataToObject"]
}
