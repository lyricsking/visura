{
  "version": 3,
  "sources": ["../../src/server/edit.server.ts"],
  "sourcesContent": ["import { ActionFunctionArgs, json } from \"@remix-run/node\";\r\nimport { getAuthUser } from \"~/core/auth/server/auth.server\";\r\nimport formDataToObject from \"~/shared/utils/form-data-to-object\";\r\nimport { createPost } from \"./post.server\";\r\nimport { Types } from \"mongoose\";\r\nimport { parseError } from \"~/shared/utils/mongoose\";\r\nimport { PluginLoaderFunction } from \"~/core/page/types/page\";\r\n\r\nexport const action = async ({ request }: ActionFunctionArgs) => {\r\n  let authUser = await getAuthUser(request);\r\n  if (!authUser || !authUser.id) {\r\n    // throw new Error(\"You are not authorised to perform this operation\");\r\n  }\r\n\r\n  const formData = await request.formData();\r\n  const formObject: any = formDataToObject(formData);\r\n  console.log(Object.fromEntries(formData));\r\n\r\n  // let title = formObject[\"title\"];\r\n  // let excerpt = formObject[\"excerpt\"];\r\n  // let content = formObject[\"content\"];\r\n  // let tags = formObject[\"tags\"];\r\n  // let featuredImage = formObject[\"featuredImage\"];\r\n\r\n  let response = await createPost({\r\n    ...formObject,\r\n    author: new Types.ObjectId(),\r\n    published: false,\r\n  });\r\n\r\n  if (response.error) {\r\n    const values = Object.fromEntries(formData);\r\n    let errors = parseError(response.error);\r\n\r\n    return json({ errors, values });\r\n  }\r\n\r\n  return json({ post: response.data });\r\n};\r\n\r\nexport const loader: PluginLoaderFunction = () => {\r\n  return async () => {};\r\n};\r\n"],
  "mappings": ";AAAA,SAA6B,YAAY;AACzC,SAAS,mBAAmB;AAC5B,OAAO,sBAAsB;AAC7B,SAAS,kBAAkB;AAC3B,SAAS,aAAa;AACtB,SAAS,kBAAkB;AAGpB,aAAM,SAAS,OAAO,EAAE,QAAQ,MAA0B;AAC/D,MAAI,WAAW,MAAM,YAAY,OAAO;AACxC,MAAI,CAAC,YAAY,CAAC,SAAS,IAAI;AAAA,EAE/B;AAEA,QAAM,WAAW,MAAM,QAAQ,SAAS;AACxC,QAAM,aAAkB,iBAAiB,QAAQ;AACjD,UAAQ,IAAI,OAAO,YAAY,QAAQ,CAAC;AAQxC,MAAI,WAAW,MAAM,WAAW;AAAA,IAC9B,GAAG;AAAA,IACH,QAAQ,IAAI,MAAM,SAAS;AAAA,IAC3B,WAAW;AAAA,EACb,CAAC;AAED,MAAI,SAAS,OAAO;AAClB,UAAM,SAAS,OAAO,YAAY,QAAQ;AAC1C,QAAI,SAAS,WAAW,SAAS,KAAK;AAEtC,WAAO,KAAK,EAAE,QAAQ,OAAO,CAAC;AAAA,EAChC;AAEA,SAAO,KAAK,EAAE,MAAM,SAAS,KAAK,CAAC;AACrC;AAEO,aAAM,SAA+B,MAAM;AAChD,SAAO,YAAY;AAAA,EAAC;AACtB;",
  "names": []
}
